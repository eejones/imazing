module DynamicSelect

  class ManufacturersController < ApplicationController
    respond_to :json

    def indexfilter
      #@manufacturers = Manufacturer.all
#      @manufacturers = Manufacturer.where(:modtype_id => params[:modtype_id])
      @manufacturers = Manufacturer.joins("LEFT JOIN `modtypemanufacturers` ON `modtypemanufacturers`.`manufacturer_id` = `manufacturers`.`id`").where(:modtypemanufacturers => {:modtype_id => params[:modtype_id]})
      respond_with(@manufacturers)
    end
  end
end

